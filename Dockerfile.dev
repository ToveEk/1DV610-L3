# Använd Node.js som basbild
FROM node:18-alpine

# Sätt arbetskatalogen
WORKDIR /var/www/html/winther-visuals

# Kopiera package.json och package-lock.json först
COPY package*.json ./

# Installera endast produktionsberoenden
RUN npm ci --omit=dev

# Kopiera resten av koden
COPY . .

# Exponera porten (3000)
EXPOSE 3000

# Kontrollera om server.js finns i containern
RUN ls -la /var/www/html/winther-visuals/src

# Kör applikationen direkt med Node
CMD ["node", "src/server.js"]
